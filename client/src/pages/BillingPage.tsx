import { useEffect,useState } from 'react';import { http } from '../api/http';
export default function BillingPage(){const [d,s]=useState<any>({kpis:{},orders:[]}); const [p,sp]=useState({orderId:'',amount:0,gcashRef:''}); const load=()=>http.get('/billing').then(r=>s(r.data.data)); useEffect(load,[]); return <div><div className='row g-2'>{Object.entries(d.kpis||{}).map(([k,v])=><div className='col-md-3' key={k}><div className='card p-2'>{k}: {String(v)}</div></div>)}</div><div className='card p-3 mt-3'><h5>Log Payment</h5><select className='form-select mb-2' onChange={e=>sp({...p,orderId:e.target.value})}><option>Order</option>{d.orders.map((o:any)=><option key={o._id} value={o._id}>{o.trackingNo}</option>)}</select><input className='form-control mb-2' type='number' onChange={e=>sp({...p,amount:Number(e.target.value)})} placeholder='amount'/><input className='form-control mb-2' onChange={e=>sp({...p,gcashRef:e.target.value})} placeholder='gcash ref'/><button className='btn btn-primary' onClick={async()=>{await http.post('/billing/payments',p); load();}}>Submit Payment</button></div></div>}
