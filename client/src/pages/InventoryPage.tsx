import { useEffect, useState } from 'react';import { http } from '../api/http';
export default function InventoryPage(){const [items,setI]=useState<any[]>([]); const [f,setF]=useState({name:'',price:0,threshold:10}); const load=()=>http.get('/inventory/items').then(r=>setI(r.data.data)); useEffect(load,[]);
return <div><h4>Inventory</h4><button className='btn btn-primary mb-2' onClick={async()=>{await http.post('/inventory/items',f); setF({name:'',price:0,threshold:10}); load();}}>Add New Item</button><div className='row g-2 mb-2'><div className='col'><input className='form-control' placeholder='name' value={f.name} onChange={e=>setF({...f,name:e.target.value})}/></div><div className='col'><input className='form-control' type='number' value={f.price} onChange={e=>setF({...f,price:Number(e.target.value)})}/></div><div className='col'><input className='form-control' type='number' value={f.threshold} onChange={e=>setF({...f,threshold:Number(e.target.value)})}/></div></div><table className='table'><thead><tr><th>Name</th><th>Stock</th><th>Action</th></tr></thead><tbody>{items.map(i=><tr key={i._id}><td>{i.name}</td><td>{i.stock}</td><td><button className='btn btn-sm btn-secondary' onClick={async()=>{await http.post('/inventory/adjust',{itemId:i._id,delta:1,reason:'manual'}); load();}}>Adjust +1</button></td></tr>)}</tbody></table><a href='http://localhost:4000/api/inventory/export/csv' className='btn btn-outline-primary'>Export CSV</a></div>}
